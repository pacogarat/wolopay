<form class="validation" name="form_steam_credentials" ng-submit="submit('steam', providers.steam)">

    <div ng-repeat="credential in providers.steam" ng-include="'form_steam.html'">
    </div>

    <button type="submit" ng-disabled="form_steam.$invalid" class="btn btn-info btn-lg" style="padding: 6px 50px">{[{ 'save' | translate }]} <span class="glyphicon glyphicon-arrow-right" aria-hidden="true"></span></button>

</form>

<!--MODAL WINDOW-->
<script type="text/ng-template" id="form_steam.html">
    <div class="form-group">
        <label translate="merchant.pay_methods.forms.apps"></label>
        <ui-select multiple name="app_mod_{[{credential.$$hashKey}]}" ng-model="credential.apps" theme="select2" style="width: 100%;" ui-validate="{appsRepeated: 'isValidAppsFromProvider(providers.steam)', appsNullRepeated: 'isValidAppsFromProviderNull(providers.steam)'}"  >
            <ui-select-match>
                <div>{[{ $item.name }]}</div>
            </ui-select-match>
            <ui-select-choices repeat="app in apps | filter: {$: $select.search}">
                <div>{[{ app.name }]}</div>
            </ui-select-choices>
        </ui-select>
    </div>

    <div class="alert alert-danger" role="alert"  ng-if="form_steam_credentials['app_mod_' + credential.$$hashKey].$error.appsNullRepeated || form_steam_credentials['app_mod_' + credential.$$hashKey].$error.appsRepeated">
        <div ng-show="form_steam_credentials['app_mod_{[{credential.$$hashKey}]}'].$error.appsRepeated" translate="merchant.pay_methods.forms.errors.apps_repeated"></div>
        <div ng-show="form_steam_credentials['app_mod_{[{credential.$$hashKey}]}'].$error.appsNullRepeated" translate="merchant.pay_methods.forms.errors.apps_null_repeated"></div>
    </div>

    <div class="form-group">
        <label>App Id*</label>
        <input type="text" name="name" placeholder=""  ng-model="credential.details.app_id" class="form-control" required>
    </div>
    <div class="form-group">
        <label>Api Key*</label>
        <input type="text" name="name" placeholder=""  ng-model="credential.details.api_key" class="form-control" required>
    </div>

    <footer-buttons provider-name="'steam'" credential="credential" credentials="providers.steam" delete="delete"></footer-buttons>

</script>